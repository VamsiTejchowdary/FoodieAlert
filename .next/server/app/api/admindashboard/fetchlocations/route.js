(()=>{var e={};e.id=224,e.ids=[224],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},95159:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>l,serverHooks:()=>h,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>c});var n=r(42706),i=r(28203),o=r(45994),a=r(81755),d=r(16148),u=r.n(d),p=r(53253);async function c(e){try{await (0,a.x)();let e=[],t=await p.A.find({status:"approved"});if(0===t.length)return new Response(JSON.stringify({message:"No approved users found."}),{status:400,headers:{"Content-Type":"application/json"}});let r=t.map(e=>e._id);return e=(await u().find({business_id:{$in:r}})).map(e=>{let r=t.find(t=>t._id.toString()===e.business_id.toString());return{...e._doc,businessPersonName:r?.name,businessEmail:r?.email}}),new Response(JSON.stringify({locations:e}),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Error while fetching locations:",e),new Response(JSON.stringify({message:"An error occurred while fetching locations."}),{status:500,headers:{"Content-Type":"application/json"}})}}let l=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/admindashboard/fetchlocations/route",pathname:"/api/admindashboard/fetchlocations",filename:"route",bundlePath:"app/api/admindashboard/fetchlocations/route"},resolvedPagePath:"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/api/admindashboard/fetchlocations/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:h}=l;function y(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{},81755:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var s=r(56037),n=r.n(s);let i=async()=>{try{await n().connect(process.env.MONGODB_URI),console.log("Connected to MongoDB"),console.log("process.env.MONGODB_URI:",process.env.REACT_APP_SERVICE_ID)}catch(e){console.log("Error connecting to MongoDB: ",e)}}},16148:(e,t,r)=>{"use strict";let s=r(56037),{Schema:n}=s,i=new n({business_id:{type:s.Schema.Types.ObjectId,ref:"User",required:!0},name:{type:String,required:!0,trim:!0},address:{type:String,required:!0,trim:!0},adminstatus:{type:String,default:"pending"},activestatus:{type:Boolean,default:!0}},{timestamps:!0}),o=s.models.Location||s.model("Location",i);e.exports=o},53253:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037),n=r.n(s);let i=new s.Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,lowercase:!0},number:{type:Number,required:!0},password:{type:String,required:!0},role:{type:String,default:"user"},status:{type:String,default:"pending"}},{timestamps:!0});i.pre("save",function(e){this.email=this.email.toLowerCase(),e()});let o=s.models.User||n().model("User",i)},42706:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994],()=>r(95159));module.exports=s})();