(()=>{var e={};e.id=661,e.ids=[661],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},86799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>m,serverHooks:()=>x,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(42706),a=r(28203),n=r(45994),o=r(81755),u=r(16148),d=r.n(u),p=r(53253),c=r(39187);async function l(e){try{let{name:t,email:r,password:s,number:i,passcode:a,businessName:n,businessAddress:u,messageChannel:l}=await e.json();await (0,o.x)();let m=(await p.A.create({name:t,email:r,number:i,password:s,passcode:a}))._id,g=await d().create({business_id:m,name:n,address:u,messagechannel:l});return c.NextResponse.json({message:"User and location registered.",user_id:m,location_id:g._id},{status:201})}catch(e){return console.error(e),c.NextResponse.json({message:"An error occurred while registering the user or location."},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/api/register/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:y,serverHooks:x}=m;function h(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{},81755:(e,t,r)=>{"use strict";r.d(t,{x:()=>a});var s=r(56037),i=r.n(s);let a=async()=>{try{await i().connect(process.env.MONGODB_URI),console.log("Connected to MongoDB")}catch(e){console.log("Error connecting to MongoDB: ",e)}}},16148:(e,t,r)=>{"use strict";let s=r(56037),{Schema:i}=s,a=new i({business_id:{type:s.Schema.Types.ObjectId,ref:"User",required:!0},name:{type:String,required:!0,trim:!0},address:{type:String,required:!0,trim:!0},messagechannel:{type:String,required:!0,default:"email"},adminstatus:{type:String,default:"pending"},activestatus:{type:Boolean,default:!0}},{timestamps:!0}),n=s.models.Location||s.model("Location",a);e.exports=n},53253:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(56037),i=r.n(s);let a=new s.Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,lowercase:!0},number:{type:Number,required:!0},password:{type:String,required:!0},passcode:{type:Number,required:!0},role:{type:String,default:"user"},status:{type:String,default:"pending"}},{timestamps:!0});a.pre("save",function(e){this.email=this.email.toLowerCase(),e()});let n=s.models.User||i().model("User",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,452],()=>r(86799));module.exports=s})();