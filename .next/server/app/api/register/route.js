(()=>{var e={};e.id=661,e.ids=[661],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},86799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>m,serverHooks:()=>y,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(42706),n=r(28203),o=r(45994),a=r(81755),u=r(16148),d=r.n(u),p=r(53253),c=r(39187);async function l(e){try{let{name:t,email:r,password:s,number:i,businessName:n,businessAddress:o}=await e.json();await (0,a.x)();let u=(await p.A.create({name:t,email:r,number:i,password:s}))._id,l=await d().create({business_id:u,name:n,address:o});return c.NextResponse.json({message:"User and location registered.",user_id:u,location_id:l._id},{status:201})}catch(e){return console.error(e),c.NextResponse.json({message:"An error occurred while registering the user or location."},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/api/register/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:x,serverHooks:y}=m;function v(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:x})}},96487:()=>{},78335:()=>{},81755:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var s=r(56037),i=r.n(s);let n=async()=>{try{await i().connect(process.env.MONGODB_URI),console.log("Connected to MongoDB")}catch(e){console.log("Error connecting to MongoDB: ",e)}}},16148:(e,t,r)=>{"use strict";let s=r(56037),{Schema:i}=s,n=new i({business_id:{type:s.Schema.Types.ObjectId,ref:"User",required:!0},name:{type:String,required:!0,trim:!0},address:{type:String,required:!0,trim:!0},adminstatus:{type:String,default:"pending"},activestatus:{type:Boolean,default:!0}},{timestamps:!0}),o=s.models.Location||s.model("Location",n);e.exports=o},53253:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037),i=r.n(s);let n=new s.Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,lowercase:!0},number:{type:Number,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,default:"user"},status:{type:String,default:"pending"}},{timestamps:!0});n.pre("save",function(e){this.email=this.email.toLowerCase(),e()});let o=s.models.User||i().model("User",n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,452],()=>r(86799));module.exports=s})();