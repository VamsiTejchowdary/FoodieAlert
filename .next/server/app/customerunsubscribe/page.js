(()=>{var e={};e.id=152,e.ids=[152],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},96118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var o=r(70260),i=r(28203),s=r(25155),n=r.n(s),a=r(67292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["customerunsubscribe",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29380)),"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/customerunsubscribe/page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9019)),"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/customerunsubscribe/page.jsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/customerunsubscribe/page",pathname:"/customerunsubscribe",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3071:(e,t,r)=>{Promise.resolve().then(r.bind(r,10835))},40023:(e,t,r)=>{Promise.resolve().then(r.bind(r,66615))},10211:(e,t,r)=>{Promise.resolve().then(r.bind(r,58875))},24283:(e,t,r)=>{Promise.resolve().then(r.bind(r,97495))},35989:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},77845:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},66615:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s});var o=r(45512),i=r(90993);let s=({children:e})=>(0,o.jsx)(i.SessionProvider,{children:e})},97495:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var o=r(45512),i=r(58009),s=r(68578);function n(){let[e,t]=(0,i.useState)(""),[r,n]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[p,m]=(0,i.useState)([]),[h,b]=(0,i.useState)(""),[f,x]=(0,i.useState)(null),v=async e=>{try{let t=await fetch("api/findcustomerbyemail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),r=(await t.json()).customer;x(r),r?._id?y(r._id):(m([]),s.oR.error("No customer found with this email."))}catch(e){s.oR.error("Error fetching user data."),console.error("Error fetching user:",e)}},y=async e=>{try{let t=await fetch("/api/fetchlocationsusingcustomerid",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e})}),r=(await t.json()).locationIds;r&&r.length>0?g(r):(m([]),s.oR.info("No locations found for this customer."))}catch(e){s.oR.error("Error fetching locations."),console.error("Error fetching locations:",e)}},g=async e=>{try{let t=await fetch("/api/fetchlocationsbyids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locationIds:e})}),r=await t.json();m(r.locations||[])}catch(e){s.oR.error("Error fetching location details."),console.error("Error fetching location details:",e)}},j=async o=>{if(o.preventDefault(),!e||!r||!l||!h){u("All fields are required.");return}try{let e=await fetch("/api/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:f._id,location_id:h._id,code:l})}),r=await e.json();console.log(r),200===e.status?(d(""),t(""),n(""),m([]),s.oR.success("Successfully unsubscribed from notifications!")):s.oR.error("Please verify to match email and code.")}catch(e){s.oR.error("Error during unsubscribe process."),console.error("Error unsubscribing:",e)}};return(0,o.jsxs)("div",{style:a.container,children:[(0,o.jsx)("h2",{style:a.title,children:"Unsubscribe from Notifications"}),(0,o.jsxs)("form",{onSubmit:j,style:a.form,children:[(0,o.jsxs)("div",{style:a.formGroup,children:[(0,o.jsx)("label",{htmlFor:"name",style:a.label,children:"Name:"}),(0,o.jsx)("input",{type:"text",id:"name",value:e,onChange:e=>t(e.target.value),style:a.input,required:!0})]}),(0,o.jsxs)("div",{style:a.formGroup,children:[(0,o.jsx)("label",{htmlFor:"email",style:a.label,children:"Email:"}),(0,o.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>{let t=e.target.value;n(t),v(t)},style:a.input,required:!0})]}),(0,o.jsxs)("div",{style:a.formGroup,children:[(0,o.jsx)("label",{htmlFor:"location",style:a.label,children:"Select Location:"}),(0,o.jsxs)("select",{id:"location",value:h?h._id:"",onChange:e=>{b(p.find(t=>t._id===e.target.value))},style:a.input,required:!0,children:[(0,o.jsx)("option",{value:"",children:"-- Select a Location --"}),p.map(e=>(0,o.jsxs)("option",{value:e._id,children:[e.name," - ",e.address]},e._id))]})]}),(0,o.jsxs)("div",{style:a.formGroup,children:[(0,o.jsx)("label",{htmlFor:"code",style:a.label,children:"Code:"}),(0,o.jsx)("input",{type:"text",id:"code",value:l,onChange:e=>d(e.target.value),style:a.input,required:!0})]}),(0,o.jsx)("button",{type:"submit",style:a.button,children:"Unsubscribe"})]}),c&&(0,o.jsx)("p",{style:a.message,children:c}),(0,o.jsx)(s.N9,{})]})}r(25806);let a={container:{maxWidth:"400px",margin:"50px auto",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",textAlign:"center",fontFamily:"'Arial', sans-serif"},title:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#333"},form:{display:"flex",flexDirection:"column",gap:"15px"},formGroup:{display:"flex",flexDirection:"column",alignItems:"flex-start"},label:{fontSize:"16px",fontWeight:"bold",marginBottom:"5px",color:"#555"},input:{width:"100%",padding:"10px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",outline:"none",boxSizing:"border-box"},button:{padding:"10px 20px",fontSize:"16px",fontWeight:"bold",color:"#fff",backgroundColor:"#ff5c5c",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},message:{marginTop:"20px",fontSize:"14px",color:"#ff5c5c"}}},10835:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/Providers.js","AuthProvider")},29380:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(62740),i=r(58875);function s(){return(0,o.jsx)("div",{children:(0,o.jsx)(i.default,{})})}},9019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>a});var o=r(62740),i=r(10835);r(82704);var s=r(69792),n=r.n(s);let a={title:"Foodie Alert",description:"Never Miss Your Favorite Food Truck Again!"};function l({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:n().className,children:(0,o.jsx)(i.AuthProvider,{children:e})})})}},58875:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/components/CustomerUnsubscribeForm.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/components/CustomerUnsubscribeForm.jsx","default")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(88077);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,o.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},82704:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[994,792,77,189],()=>r(96118));module.exports=o})();