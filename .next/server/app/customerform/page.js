(()=>{var e={};e.id=497,e.ids=[497],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},37674:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var o=r(70260),s=r(28203),i=r(25155),a=r.n(i),n=r(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["customerform",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,12367)),"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/customerform/page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9019)),"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/customerform/page.jsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/customerform/page",pathname:"/customerform",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3071:(e,t,r)=>{Promise.resolve().then(r.bind(r,10835))},40023:(e,t,r)=>{Promise.resolve().then(r.bind(r,66615))},98900:(e,t,r)=>{Promise.resolve().then(r.bind(r,87290))},35284:(e,t,r)=>{Promise.resolve().then(r.bind(r,74021))},35989:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},77845:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},66615:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i});var o=r(45512),s=r(90993);let i=({children:e})=>(0,o.jsx)(s.SessionProvider,{children:e})},74021:(e,t,r)=>{"use strict";r.d(t,{default:()=>k});var o=r(45512),s=r(58009);class i{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},n=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},l=async(e,t,r={})=>{let o=await fetch(a.origin+e,{method:"POST",headers:r,body:t}),s=await o.text(),n=new i(o.status,s);if(o.ok)return n;throw n},d=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},c=e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},u=e=>e.webdriver||!e.languages||0===e.languages.length,m=()=>new i(451,"Unavailable For Headless Browser"),p=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"},h=e=>!e.list?.length||!e.watchVariable,f=(e,t)=>e instanceof FormData?e.get(t):e[t],b=(e,t)=>{if(h(e))return!1;p(e.list,e.watchVariable);let r=f(t,e.watchVariable);return"string"==typeof r&&e.list.includes(r)},g=()=>new i(403,"Forbidden"),v=(e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"},y=async(e,t,r)=>{let o=Number(await r.get(e)||0);return t-Date.now()+o},x=async(e,t,r)=>{if(!t.throttle||!r)return!1;v(t.throttle,t.id);let o=t.id||e;return await y(o,t.throttle,r)>0||(await r.set(o,Date.now().toString()),!1)},w=()=>new i(429,"Too Many Requests"),j={send:async(e,t,r,o)=>{let s=n(o),i=s.publicKey||a.publicKey,p=s.blockHeadless||a.blockHeadless,h=s.storageProvider||a.storageProvider,f={...a.blockList,...s.blockList},v={...a.limitRate,...s.limitRate};return p&&u(navigator)?Promise.reject(m()):(d(i,e,t),c(r),r&&b(f,r))?Promise.reject(g()):await x(location.pathname,v,h)?Promise.reject(w()):l("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})}},P=async(e,t,r,o,s)=>{try{console.log("Sending email to:",e,t,r);let i=await j.send("FoodeAlert","foodealert",{user_name:t,email:e,food_truck_name:o,food_truck_location:s,unsubscribe_code:r},"Wl5215FfRpqukGjrP");200===i.status?console.log("Email sent successfully"):console.error("Failed to send email:",i)}catch(e){console.error("Error sending email:",e)}},k=()=>{let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[a,n]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[m,p]=(0,s.useState)([]),[h,f]=(0,s.useState)(""),[b,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch(`api/locations?email=${encodeURIComponent(a)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();p(t.locations)}catch(e){console.error("Error fetching locations:",e)}};a&&e()},[a]);let v=async o=>{o.preventDefault();let s={name:e,phone:r,email:a,favfood:c,location_id:l};try{let e=await fetch("/api/customersubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok){let r=(await e.json()).customer.code;console.log("selectedLocationDetails: ",b),await P(s.email,s.name,r,b.name,b.address),f("Thank you for subscribing!"),t(""),i(""),n(""),u(""),d(""),setTimeout(()=>f(""),5e3)}else alert("An error occurred. Please try again.")}catch(e){console.error("Error submitting form:",e),alert("An error occurred. Please try again.")}};return(0,o.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-start py-8 sm:py-4",style:{background:"linear-gradient(to right, #001f3d, #243b4a)"},children:[(0,o.jsx)("div",{className:"flex justify-center mb-0 mt-4 sm:mt-2",style:{marginTop:"-40px"},children:(0,o.jsx)("img",{src:"foodeehero.png",alt:"Logo",className:"w-64 h-64 md:w-72 md:h-72 object-contain"})}),(0,o.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 rounded-lg shadow-lg",style:{background:"linear-gradient(to right, #001f3d, #243b4a)"},children:[(0,o.jsx)("h2",{className:"text-2xl text-center text-[#ff6f61] font-bold mb-1",style:{background:"linear-gradient(to right, #ff6f61, #f86e4f)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Subscribe to Food Truck Notifications"}),h&&(0,o.jsx)("div",{className:"bg-[#d4edda] text-[#155724] p-4 mb-4 rounded-md border border-[#c3e6cb] text-center",children:h}),(0,o.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,o.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,placeholder:"Your Name",className:"w-full px-4 py-2 border-none bg-[#243b4a] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#ff6f61]"}),(0,o.jsx)("input",{type:"number",value:r,onChange:e=>i(e.target.value),required:!0,placeholder:"Phone Number",className:"w-full px-4 py-2 border-none bg-[#243b4a] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#ff6f61]"}),(0,o.jsx)("input",{type:"email",value:a,onChange:e=>n(e.target.value),required:!0,placeholder:"Email Address",className:"w-full px-4 py-2 border-none bg-[#243b4a] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#ff6f61]"}),(0,o.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"Favourite Food",className:"w-full px-4 py-2 border-none bg-[#243b4a] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#ff6f61]"}),(0,o.jsxs)("select",{value:l,onChange:e=>{let t=e.target.value;d(t),g(m.find(e=>e._id===t))},required:!0,className:"w-full px-4 py-2 border-none bg-[#243b4a] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#ff6f61]",children:[(0,o.jsx)("option",{value:"",children:"Select a location"}),m.map(e=>(0,o.jsxs)("option",{value:e._id,children:[e.name," - ",e.address]},e._id))]}),(0,o.jsx)("button",{type:"submit",className:"w-full py-3 bg-[#ff6f61] text-white font-semibold rounded-md hover:bg-[#f86e4f] focus:outline-none focus:ring-2 focus:ring-[#f86e4f]",children:"Subscribe"})]})]})]})}},10835:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/app/Providers.js","AuthProvider")},12367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(62740),s=r(87290);function i(){return(0,o.jsx)("div",{children:(0,o.jsx)(s.default,{})})}},9019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>n});var o=r(62740),s=r(10835);r(82704);var i=r(69792),a=r.n(i);let n={title:"Foodie Alert",description:"Never Miss Your Favorite Food Truck Again!"};function l({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:a().className,children:(0,o.jsx)(s.AuthProvider,{children:e})})})}},87290:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/components/CustomerForm.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vamsitejchowdary/Documents/GitHub/FoodieAlert/components/CustomerForm.jsx","default")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,o.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},82704:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[994,792,77],()=>r(37674));module.exports=o})();