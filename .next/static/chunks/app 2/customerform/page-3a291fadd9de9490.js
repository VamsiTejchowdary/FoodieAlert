(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{3612:(e,t,o)=>{Promise.resolve().then(o.bind(o,4236))},4236:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var r=o(5155),l=o(2115);let a={pageContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f0f0"},container:{maxWidth:"600px",width:"100%",padding:"20px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#333",marginBottom:"20px"},successMessage:{backgroundColor:"#d4edda",color:"#155724",padding:"10px",marginBottom:"20px",borderRadius:"5px",textAlign:"center",border:"1px solid #c3e6cb"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{fontSize:"14px",marginBottom:"5px",color:"#555"},input:{padding:"10px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",width:"100%"},select:{padding:"10px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",width:"100%"},button:{padding:"12px",fontSize:"16px",backgroundColor:"#007BFF",color:"#fff",borderRadius:"4px",border:"none",cursor:"pointer",width:"100%",transition:"background-color 0.3s"}},i=()=>{let[e,t]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),[n,s]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[h,x]=(0,l.useState)([]),[m,b]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=async()=>{try{let e=await fetch("api/locations?email=".concat(encodeURIComponent(n)),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(t),x(t.locations)}catch(e){console.error("Error fetching locations:",e)}};n&&e()},[n]);let f=async r=>{r.preventDefault();let l={name:e,phone:o,email:n,favfood:u,code:Math.floor(1e3+9e3*Math.random()),location_id:d};console.log("Form Data:",l);try{let e=await fetch("/api/customersubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});await e.json(),e.ok?(b("Thank you for subscribing!"),t(""),i(""),s(""),p(""),c(""),setTimeout(()=>{b("")},5e3)):alert("An error occurred. Please try again.")}catch(e){console.error("Error submitting form:",e),alert("An error occurred. Please try again.")}};return(0,r.jsx)("div",{style:a.pageContainer,children:(0,r.jsxs)("div",{style:a.container,children:[(0,r.jsx)("h2",{style:a.heading,children:"Subscribe to Food Truck Notifications"}),m&&(0,r.jsx)("div",{style:a.successMessage,children:m}),(0,r.jsxs)("form",{onSubmit:f,style:a.form,children:[(0,r.jsxs)("div",{style:a.formGroup,children:[(0,r.jsx)("label",{htmlFor:"name",style:a.label,children:"Your Name"}),(0,r.jsx)("input",{type:"text",id:"name",value:e,onChange:e=>t(e.target.value),required:!0,style:a.input})]}),(0,r.jsxs)("div",{style:a.formGroup,children:[(0,r.jsx)("label",{htmlFor:"phone",style:a.label,children:"Phone Number"}),(0,r.jsx)("input",{type:"number",id:"phone",value:o,onChange:e=>i(e.target.value),required:!0,style:a.input})]}),(0,r.jsxs)("div",{style:a.formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",style:a.label,children:"Email Address"}),(0,r.jsx)("input",{type:"email",id:"email",value:n,onChange:e=>s(e.target.value),required:!0,style:a.input})]}),(0,r.jsxs)("div",{style:a.formGroup,children:[(0,r.jsx)("label",{htmlFor:"favfood",style:a.label,children:"Favourite Food"}),(0,r.jsx)("input",{type:"text",id:"favfood",value:u,onChange:e=>p(e.target.value),required:!0,style:a.input})]}),(0,r.jsxs)("div",{style:a.formGroup,children:[(0,r.jsx)("label",{htmlFor:"location",style:a.label,children:"Select Location"}),(0,r.jsxs)("select",{id:"location",value:d,onChange:e=>c(e.target.value),required:!0,style:a.select,children:[(0,r.jsx)("option",{value:"",children:"Select a location"}),h.map(e=>(0,r.jsxs)("option",{value:e._id,children:[e.name," - ",e.address]},e._id))]})]}),(0,r.jsx)("div",{style:a.formGroup,children:(0,r.jsx)("button",{type:"submit",style:a.button,children:"Subscribe"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(3612)),_N_E=e.O()}]);