(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2485:(e,t,s)=>{Promise.resolve().then(s.bind(s,3927))},3927:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(5155),a=s(8173),n=s.n(a),l=s(2115),o=s(2615),i=s(6046);function d(){let[e,t]=(0,l.useState)(""),[s,a]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),h=(0,i.useRouter)(),u=async t=>{t.preventDefault();try{let t=await (0,o.signIn)("credentials",{email:e,password:s,redirect:!1}),r=await fetch("api/userExists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),a=(await r.json()).user;if(t.error){c("Invalid Credentials");return}console.log("role: ",a.role),"admin"==a.role?(console.log("Hi role: ",a.role),h.replace("admindashboard")):h.replace("dashboard")}catch(e){console.log(e)}};return(0,r.jsx)("div",{className:"grid place-items-center h-screen",children:(0,r.jsxs)("div",{className:"shadow-lg p-5 rounded-lg border-t-4 border-green-400",children:[(0,r.jsx)("h1",{className:"text-xl font-bold my-4",children:"Login"}),(0,r.jsxs)("form",{onSubmit:u,className:"flex flex-col gap-3",children:[(0,r.jsx)("input",{onChange:e=>t(e.target.value),type:"text",placeholder:"Email"}),(0,r.jsx)("input",{onChange:e=>a(e.target.value),type:"password",placeholder:"Password"}),(0,r.jsx)("button",{className:"bg-green-600 text-white font-bold cursor-pointer px-6 py-2",children:"Login"}),d&&(0,r.jsx)("div",{className:"bg-red-500 text-white w-fit text-sm py-1 px-3 rounded-md mt-2",children:d}),(0,r.jsxs)(n(),{className:"text-sm mt-3 text-right",href:"/register",children:["Don't have an account? ",(0,r.jsx)("span",{className:"underline",children:"Register"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[615,28,441,517,358],()=>t(2485)),_N_E=e.O()}]);