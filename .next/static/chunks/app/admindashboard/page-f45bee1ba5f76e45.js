(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{1753:(e,s,t)=>{Promise.resolve().then(t.bind(t,2985))},2985:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var o=t(5155),l=t(2615),a=t(6046),r=t(2115),n=t(2110);function d(){var e,s;let{data:t}=(0,l.useSession)(),d=(0,a.useRouter)(),[i,c]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[h,g]=(0,r.useState)("users"),x=async()=>{try{let e=await fetch("/api/fetchallusers",{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();s.users?c(s.users):console.log("No users found")}catch(e){console.log("Error fetching users:",e)}},m=async(e,s)=>{try{let t=await fetch("/api/admindashboard/updateuserstatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:s})}),o=await t.json();console.log(o),t.ok?(x(),f(),n.oR.success("Status updated successfully")):(n.oR.error("Error updating status"),console.error("Error updating status:",o.message))}catch(e){console.error("Error updating status:",e)}},f=async()=>{try{let e=await fetch("/api/admindashboard/fetchlocations",{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();s.locations?p(s.locations):console.log("No locations found")}catch(e){console.log("Error fetching locations:",e)}},b=async(e,s)=>{console.log("Updating location status:",e,s);try{let t=await fetch("/api/admindashboard/updatelocationstatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,adminstatus:s})}),o=await t.json();console.log(o),t.ok?(f(),n.oR.success("Location status updated successfully")):(n.oR.error("Error updating location status"),console.error("Error updating status:",o.message))}catch(e){console.error("Error updating status:",e)}};return(0,r.useEffect)(()=>{x(),f()},[]),(0,o.jsxs)("div",{className:"min-h-screen flex flex-col items-center",style:{background:"linear-gradient(to right, #001f3d, #243b4a)"},children:[(0,o.jsx)(n.N9,{}),(0,o.jsx)("div",{className:"flex justify-center my-6",style:{marginTop:"-40px"},children:(0,o.jsx)("img",{src:"foodeehero.png",alt:"Logo",className:"w-64 h-64 md:w-72 md:h-72 object-contain"})}),(0,o.jsx)("div",{className:"relative text-2xl font-bold p-2 inline-block rounded",style:{color:"#ff6f61",top:"-30px"},children:"Admin Dashboard"}),(0,o.jsxs)("div",{className:"shadow-lg p-6 md:p-8 bg-[#243b4a] text-white flex flex-col gap-4 rounded-lg border-t-4 border-green-400 w-11/12 max-w-sm md:max-w-md",style:{background:"linear-gradient(to right, #001f3d, #374958)"},children:[(0,o.jsxs)("div",{children:["Name: ",(0,o.jsx)("span",{className:"font-bold",children:null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name})]}),(0,o.jsxs)("div",{children:["Email: ",(0,o.jsx)("span",{className:"font-bold",children:null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.email})]}),(0,o.jsx)("button",{onClick:()=>{(0,l.signOut)({redirect:!1}).then(()=>{d.push("/login")})},className:"bg-gradient-to-r from-[#ff6f61] to-[#f86e4f] text-white font-bold px-4 py-2 md:px-6 md:py-3 rounded hover:from-[#f56a50] hover:to-[#e95b40] transition-all",children:"Log Out"})]}),(0,o.jsxs)("div",{className:"mt-8 w-full max-w-4xl",children:[(0,o.jsxs)("div",{className:"flex justify-center",children:[(0,o.jsx)("button",{className:"px-6 py-2 text-lg font-bold rounded-t-lg ".concat("users"===h?"bg-[#ff6f61] text-white":"bg-[#243b4a] text-gray-400"),onClick:()=>g("users"),children:"User Approvals"}),(0,o.jsx)("button",{className:"px-6 py-2 text-lg font-bold rounded-t-lg ".concat("locations"===h?"bg-[#ff6f61] text-white":"bg-[#243b4a] text-gray-400"),onClick:()=>g("locations"),children:"Location Approvals"})]}),(0,o.jsxs)("div",{className:"p-6 rounded-lg shadow-lg text-white",children:["users"===h&&(0,o.jsx)("div",{className:"grid gap-6 grid-cols-1 w-full md:grid-cols-2 lg:grid-cols-3",children:i.length>0?i.map(e=>(0,o.jsxs)("div",{className:"bg-[#243b4a] rounded-lg shadow-lg p-4 flex flex-col items-start border-t-4",style:{borderColor:"approved"===e.status?"green":"yellow"},children:[(0,o.jsx)("h3",{className:"text-lg font-bold",children:e.name}),(0,o.jsxs)("p",{children:["Email: ",e.email]}),(0,o.jsxs)("p",{children:["Number: ",e.number]}),(0,o.jsxs)("p",{children:["Status: ",(0,o.jsx)("span",{className:"ml-2 font-bold ".concat("approved"===e.status?"text-green-400":"text-yellow-400"),children:e.status})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-2 w-full",children:["pending"===e.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>m(e._id,"approved"),className:"bg-green-500 text-white font-bold px-4 py-2 rounded hover:bg-green-600 w-full",children:"Approve"}),(0,o.jsx)("button",{onClick:()=>m(e._id,"rejected"),className:"bg-red-500 text-white font-bold px-4 py-2 rounded hover:bg-red-600 w-full",children:"Reject"})]}),"approved"===e.status&&(0,o.jsx)("button",{onClick:()=>m(e._id,"rejected"),className:"bg-red-500 text-white font-bold px-4 py-2 rounded hover:bg-red-600 w-full",children:"Reject"}),"rejected"===e.status&&(0,o.jsx)("button",{onClick:()=>m(e._id,"approved"),className:"bg-green-500 text-white font-bold px-4 py-2 rounded hover:bg-green-600 w-full",children:"Approve"})]})]},e._id)):(0,o.jsx)("p",{className:"text-center w-full",children:"No users found"})}),"locations"===h&&(0,o.jsx)("div",{className:"grid gap-6 grid-cols-1 w-full md:grid-cols-2 lg:grid-cols-3",children:u.length>0?u.map(e=>(0,o.jsxs)("div",{className:"bg-[#243b4a] rounded-lg shadow-lg p-4 flex flex-col items-start border-t-4",style:{borderColor:"approved"===e.adminstatus?"green":"yellow"},children:[(0,o.jsx)("h3",{className:"text-lg font-bold",children:e.name}),(0,o.jsxs)("p",{children:["Person Name: ",e.businessPersonName]}),(0,o.jsxs)("p",{children:["Person Email: ",e.businessEmail]}),(0,o.jsxs)("p",{children:["Business Address: ",e.address]}),(0,o.jsxs)("p",{children:["Message Channel: ",e.messagechannel]}),(0,o.jsxs)("p",{children:["Admin Status: ",(0,o.jsx)("span",{className:"ml-2 font-bold ".concat("approved"===e.adminstatus?"text-green-400":"text-yellow-400"),children:e.adminstatus})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-2 w-full",children:["pending"===e.adminstatus&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>b(e._id,"approved"),className:"bg-green-500 text-white font-bold px-4 py-2 rounded hover:bg-green-600 w-full",children:"Approve"}),(0,o.jsx)("button",{onClick:()=>b(e._id,"rejected"),className:"bg-red-500 text-white font-bold px-4 py-2 rounded hover:bg-red-600 w-full",children:"Reject"})]}),"approved"===e.adminstatus&&(0,o.jsx)("button",{onClick:()=>b(e._id,"rejected"),className:"bg-red-500 text-white font-bold px-4 py-2 rounded hover:bg-red-600 w-full",children:"Reject"}),"rejected"===e.adminstatus&&(0,o.jsx)("button",{onClick:()=>b(e._id,"approved"),className:"bg-green-500 text-white font-bold px-4 py-2 rounded hover:bg-green-600 w-full",children:"Approve"})]})]},e._id)):(0,o.jsx)("p",{className:"text-center w-full",children:"No locations found"})})]})]}),(0,o.jsx)("footer",{className:"footer",style:{padding:"30px",textAlign:"center",color:"#ddd"},children:(0,o.jsx)("p",{children:"\xa9 2025 FoodeAlert. All rights reserved."})})]})}t(5716)},6046:(e,s,t)=>{"use strict";var o=t(6658);t.o(o,"useRouter")&&t.d(s,{useRouter:function(){return o.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[797,27,615,441,517,358],()=>s(1753)),_N_E=e.O()}]);