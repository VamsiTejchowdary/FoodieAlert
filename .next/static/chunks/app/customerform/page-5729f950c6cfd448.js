(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{3612:(e,t,o)=>{Promise.resolve().then(o.bind(o,4236))},4236:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var r=o(5155),i=o(2115);let l={pageContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f0f0"},container:{maxWidth:"600px",width:"100%",padding:"20px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#333",marginBottom:"20px"},successMessage:{backgroundColor:"#d4edda",color:"#155724",padding:"10px",marginBottom:"20px",borderRadius:"5px",textAlign:"center",border:"1px solid #c3e6cb"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{fontSize:"14px",marginBottom:"5px",color:"#555"},input:{padding:"10px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",width:"100%"},select:{padding:"10px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",width:"100%"},button:{padding:"12px",fontSize:"16px",backgroundColor:"#007BFF",color:"#fff",borderRadius:"4px",border:"none",cursor:"pointer",width:"100%",transition:"background-color 0.3s"}},a=()=>{let[e,t]=(0,i.useState)(""),[o,a]=(0,i.useState)(""),[n,s]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[h,x]=(0,i.useState)([]),[b,f]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("api/locations",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(t),x(t.locations)}catch(e){console.error("Error fetching locations:",e)}})()},[]);let m=async r=>{r.preventDefault();let i=Math.floor(1e3+9e3*Math.random());try{let r=await fetch("/api/customersubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,phone:o,email:n,favfood:u,code:i,location_id:d})});await r.json(),r.ok?(f("Thank you for subscribing!"),t(""),a(""),s(""),p(""),c(""),setTimeout(()=>{f("")},5e3)):alert("An error occurred. Please try again.")}catch(e){console.error("Error submitting form:",e),alert("An error occurred. Please try again.")}};return(0,r.jsx)("div",{style:l.pageContainer,children:(0,r.jsxs)("div",{style:l.container,children:[(0,r.jsx)("h2",{style:l.heading,children:"Subscribe to Food Truck Notifications"}),b&&(0,r.jsx)("div",{style:l.successMessage,children:b}),(0,r.jsxs)("form",{onSubmit:m,style:l.form,children:[(0,r.jsxs)("div",{style:l.formGroup,children:[(0,r.jsx)("label",{htmlFor:"name",style:l.label,children:"Your Name"}),(0,r.jsx)("input",{type:"text",id:"name",value:e,onChange:e=>t(e.target.value),required:!0,style:l.input})]}),(0,r.jsxs)("div",{style:l.formGroup,children:[(0,r.jsx)("label",{htmlFor:"phone",style:l.label,children:"Phone Number"}),(0,r.jsx)("input",{type:"number",id:"phone",value:o,onChange:e=>a(e.target.value),required:!0,style:l.input})]}),(0,r.jsxs)("div",{style:l.formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",style:l.label,children:"Email Address"}),(0,r.jsx)("input",{type:"email",id:"email",value:n,onChange:e=>s(e.target.value),required:!0,style:l.input})]}),(0,r.jsxs)("div",{style:l.formGroup,children:[(0,r.jsx)("label",{htmlFor:"favfood",style:l.label,children:"Favourite Food"}),(0,r.jsx)("input",{type:"text",id:"favfood",value:u,onChange:e=>p(e.target.value),required:!0,style:l.input})]}),(0,r.jsxs)("div",{style:l.formGroup,children:[(0,r.jsx)("label",{htmlFor:"location",style:l.label,children:"Select Location"}),(0,r.jsxs)("select",{id:"location",value:d,onChange:e=>c(e.target.value),required:!0,style:l.select,children:[(0,r.jsx)("option",{value:"",children:"Select a location"}),h.map(e=>(0,r.jsxs)("option",{value:e._id,children:[e.name," - ",e.address]},e._id))]})]}),(0,r.jsx)("div",{style:l.formGroup,children:(0,r.jsx)("button",{type:"submit",style:l.button,children:"Subscribe"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(3612)),_N_E=e.O()}]);